<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to Justifying Alpha Levels • Superpower</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to Justifying Alpha Levels">
<meta property="og:description" content="Superpower">
<meta property="og:image" content="/Sticker/Superpower2.PNG">
<meta property="og:image:alt" content="Superpower logo">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@exphysstudent">
<meta name="twitter:site" content="@exphysstudent">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Superpower</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ANCOVAs.html">Power Calculations for ANCOVA</a>
    </li>
    <li>
      <a href="../articles/compromise_power.html">Introduction to Justifying Alpha Levels</a>
    </li>
    <li>
      <a href="../articles/emmeans_power.html">Power calculations for `emmeans` analyses</a>
    </li>
    <li>
      <a href="../articles/intro_to_superpower.html">Introduction to Superpower</a>
    </li>
    <li>
      <a href="../articles/more_anova_designs.html">More ANOVA designs</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/arcaldwell49/Superpower/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to Justifying Alpha Levels</h1>
                        <h4 data-toc-skip class="author">Daniel Lakens
&amp; Aaron R. Caldwell</h4>
            
            <h4 data-toc-skip class="date">2024-07-30</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/arcaldwell49/Superpower/blob/HEAD/vignettes/compromise_power.Rmd" class="external-link"><code>vignettes/compromise_power.Rmd</code></a></small>
      <div class="hidden name"><code>compromise_power.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>We have recently, August 2020, added 5 new functions to
<code>Superpower</code> to expand the package’s capabilities. In this
vignette, we will introduce these new functions and how they can help
with study planning.</p>
<p>These new functions include: <code>power.ftest</code>,
<code>optimal_alpha</code>, <code>ANOVA_compromise</code>,
<code>alpha_standardized</code>, and <code>p_standardized</code></p>
<p>The overall goal is to provide ways for researchers to justify their
alpha level when designing studies, and provide greater flexibility.</p>
</div>
<div class="section level2">
<h2 id="how-are-error-rates-minimized">How are error rates minimized?<a class="anchor" aria-label="anchor" href="#how-are-error-rates-minimized"></a>
</h2>
<p>Within the new <code>optimal_alpha</code> function, there are two
options within the <code>error</code> argument: <code>minimal</code> or
<code>balanced</code>.</p>
<p>First, we have an equation for how a weighted combined error rate is
calculated when <code>error = minimal</code>.
<code>(costT1T2 * x + priorH1H0 * y)/(priorH1H0 + costT1T2)</code></p>
<p><span class="math inline">\(WCER
=  \frac{\frac{cost_\alpha}{cost_\beta} \cdot \alpha  +
\frac{Pr(H_1)}{Pr(H_0)}\cdot\beta}{\frac{Pr(H_1)}{Pr(H_0)}+\frac{cost_\alpha}{cost_\beta}}\)</span></p>
<p>Second, we have an equation for how a weighted combined error rate is
calculated when <code>error = balanced</code>.
<code>max((costT1T2 * x - priorH1H0 * y)/(priorH1H0 + costT1T2), (priorH1H0 * y - costT1T2 * x)/(priorH1H0 + costT1T2))</code></p>
<p><span class="math inline">\(WCER
=  max(\frac{\frac{cost_\alpha}{cost_\beta} \cdot \alpha  -
\frac{Pr(H_1)}{Pr(H_0)}\cdot\beta}{\frac{Pr(H_1)}{Pr(H_0)}+\frac{cost_\alpha}{cost_\beta}}
| \frac{ \frac{Pr(H_1)}{Pr(H_0)}\cdot\beta -
\frac{cost_\alpha}{cost_\beta} \cdot \alpha
}{\frac{Pr(H_1)}{Pr(H_0)}+\frac{cost_\alpha}{cost_\beta}})\)</span></p>
</div>
<div class="section level2">
<h2 id="minimizing-error-rates">Minimizing Error Rates<a class="anchor" aria-label="anchor" href="#minimizing-error-rates"></a>
</h2>
<p>Assume we plan to perform an independent samples <em>t</em>-test,
where our smallest effect size of interest is d = 0.5, and we are
planning to collect 64 participants in each condition. We would normally
calculate power as follows:</p>
<p><code>power.t.test(delta = .5, sd = 1, n = 64, sig.level = 0.05, type = 'two.sample', alternative = 'two.sided')$power</code></p>
<p>This analysis tells us that we have 80% power with a 5% alpha level
for our smallest effect size of interest, d = 0.5, when we collect 64
participants in each condition.</p>
<p>If we design 2000 studies like this, the number of Type 1 and Type 2
errors we make depend on how often the null hypothesis is true, and how
often the alternative hypothesis is true. Let’s assume both are equally
likely for now. This means that in 1000 studies the null hypothesis is
true, and we will make 50 Type 1 errors. In 1000 studies the alternative
hypothesis is true, and we will make 100-80 = 20% Type 2 errors, so in
200 studies we will not observe a significant result even if there is a
true effect. Combining Type 1 and Type 2 errors, in the long run, we
should expect 250 of our 2000 studies to yield an error.</p>
<p>The goal in Neyman-Pearson hypothesis testing is to control the
number of errors we make, as we perform hypothesis tests. Researchers
often rely on convention when setting error rates, and there is no
special reason to set the Type 1 error rate at 5% and the Type 2 error
rate at 20%, and there might be better choices when designing studies.
For example, when collecting 64 participants per condition, it is also
not optimally efficient to use these norms.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/optimal_alpha.html">optimal_alpha</a></span><span class="op">(</span>power_function <span class="op">=</span> <span class="st">"power.t.test(delta = .5, sd = 1, n=64, 
                     sig.level = x, type='two.sample', 
                     alternative='two.sided')$power"</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Warning in geom_point(aes(x = res$minimum, y = (costT1T2 * res$minimum + : All aesthetics have length 1, but the data has 9999 rows.</span>
<span class="co">## <span style="color: #00BBBB;">ℹ</span> Please consider using `annotate()` or provide this layer with data containing</span>
<span class="co">##   a single row.</span></code></pre>
<p><img src="compromise_power_files/figure-html/unnamed-chunk-1-1.png" width="576"></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## </span>
<span class="co">## Optimal Alpha</span>
<span class="co">##        Alpha      Beta Weighted.Combined.Error.Rate</span>
<span class="co">## 1 0.09967232 0.1216627                    0.1106675</span>
<span class="co">## </span>
<span class="co">## From power function:</span>
<span class="co">## [1] "power.t.test(delta = .5, sd = 1, n=64, \n                     sig.level = x, type='two.sample', \n                     alternative='two.sided')$power"</span></code></pre>
<p>If a researcher is interested in effects of d = 0.5, and plans to
collect 64 participants in each condition, setting the Type 1 error rate
to 10% will increase the power to 88%. If we would perform 2000 studies
designed with these error rates, we would observe 100 Type 1 errors and
120 Type 2 errors. The combined error rate across 2000 studies is 220
instead of 250. In other words, by choosing a more optimal alpha level,
we can design lines of research more efficiently, because we are less
likely to make errors in our statistical inferences.</p>
<div class="section level3">
<h3 id="balancing-error-rates">Balancing Error Rates<a class="anchor" aria-label="anchor" href="#balancing-error-rates"></a>
</h3>
<p>You can choose to minimize the combined error rates, but you can also
decide that it makes most sense to balance the error rates. For example,
you might think a Type 1 error is just as problematic as a Type 2 error,
and therefore, you want to design a study that has balanced error rates
for a smallest effect size of interest (e.g., a 5% Type 1 error rate and
a 95% Type 2 error rate). The <code>optimal_alpha</code> function can
either minimize errors, or balance them, by specifying an additional
argument in the function. The default is to minimize error rates, but by
adding <code>error = "balance"</code> an alpha level is calculated so
that the Type 1 error rate equals the Type 2 error rate.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/optimal_alpha.html">optimal_alpha</a></span><span class="op">(</span>power_function <span class="op">=</span> <span class="st">"power.t.test(delta = .5, sd = 1, n=64, 
                      sig.level = x, type='two.sample', 
                      alternative='two.sided')$power"</span>, error <span class="op">=</span> <span class="st">"balance"</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Warning in geom_point(aes(x = res$minimum, y = (costT1T2 * res$minimum + : All aesthetics have length 1, but the data has 9999 rows.</span>
<span class="co">## <span style="color: #00BBBB;">ℹ</span> Please consider using `annotate()` or provide this layer with data containing</span>
<span class="co">##   a single row.</span></code></pre>
<p><img src="compromise_power_files/figure-html/unnamed-chunk-2-1.png" width="576"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res2</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## </span>
<span class="co">## Optimal Alpha</span>
<span class="co">##       Alpha     Beta Weighted.Combined.Error.Rate</span>
<span class="co">## 1 0.1110855 0.111082                 1.763508e-06</span>
<span class="co">## </span>
<span class="co">## From power function:</span>
<span class="co">## [1] "power.t.test(delta = .5, sd = 1, n=64, \n                      sig.level = x, type='two.sample', \n                      alternative='two.sided')$power"</span></code></pre>
<p>Repeating our earlier example, the alpha level is 11%, and the power
is 89% (or the Type 2 error rate is 11%). Choosing to balance error
rates is only slightly less efficient (22.22%) compared to minimizing
error rates (22.13%). Power analysis is always a messy business due to
the uncertainty in the true effect size, and I would not worry about the
rather trivial difference between minimal error rates and balanced error
rates, and the latter seems slightly more intuitive to explain, which
might give this approach some practical benefits when we try to teach or
explain the idea to others.</p>
</div>
</div>
<div class="section level2">
<h2 id="relative-costs-and-prior-probabilities">Relative costs and prior probabilities<a class="anchor" aria-label="anchor" href="#relative-costs-and-prior-probabilities"></a>
</h2>
<p>So far we have assumed a Type 1 error and Type 2 error are equally
problematic. But you might believe Cohen (1988) was right, and Type 1
errors are exactly 4 times as bad as Type 2 errors. Or you might think
they are twice as problematic, or 10 times as problematic. However you
weigh them, as explained by Mudge et al., 2012, and Ulrich &amp; Miller,
2019, you should incorporate those weights into your decisions.</p>
<p>The function has another optional argument, <code>costT1T2</code>,
that allows you to specify the relative cost of Type1:Type2 errors. By
default this is set to 1, but you can set it to 4 (or any other value)
such that Type 1 errors are 4 times as costly as Type 2 errors. This
will change the weight of Type 1 errors compared to Type 2 errors, and
thus also the choice of the best alpha level.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/optimal_alpha.html">optimal_alpha</a></span><span class="op">(</span>power_function <span class="op">=</span> <span class="st">"power.t.test(delta = .5, sd = 1, n=100, 
                      sig.level = x, type='two.sample', 
                      alternative='two.sided')$power"</span>,
                      error <span class="op">=</span> <span class="st">"minimal"</span>, costT1T2 <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Warning in geom_point(aes(x = res$minimum, y = (costT1T2 * res$minimum + : All aesthetics have length 1, but the data has 9999 rows.</span>
<span class="co">## <span style="color: #00BBBB;">ℹ</span> Please consider using `annotate()` or provide this layer with data containing</span>
<span class="co">##   a single row.</span></code></pre>
<p><img src="compromise_power_files/figure-html/unnamed-chunk-3-1.png" width="576"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res3</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## </span>
<span class="co">## Optimal Alpha</span>
<span class="co">##        Alpha      Beta Weighted.Combined.Error.Rate</span>
<span class="co">## 1 0.01918734 0.1211773                   0.03958533</span>
<span class="co">## </span>
<span class="co">## From power function:</span>
<span class="co">## [1] "power.t.test(delta = .5, sd = 1, n=100, \n                      sig.level = x, type='two.sample', \n                      alternative='two.sided')$power"</span></code></pre>
<p>Now, the alpha level that minimized the <em>weighted</em> Type 1 and
Type 2 error rates is 2%.</p>
<p>Similarly, you can take into account prior probabilities that either
the null is true (and you will observe a Type 1 error), or that the
alternative hypothesis is true (and you will observe a Type 2 error). By
incorporating these expectations, you can minimize or balance error
rates in the long run (assuming your priors are correct). Priors can be
specified using the <code>priorH1H0</code> argument, which by default is
1 (H1 and H0 are equally likely). Setting it to 4 means you think the
alternative hypothesis (and hence, Type 2 errors) are 4 times more
likely than that the null hypothesis is true (and hence, Type 1
errors).</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/optimal_alpha.html">optimal_alpha</a></span><span class="op">(</span>power_function <span class="op">=</span> <span class="st">"power.t.test(delta = .5, sd = 1, n=100, 
                      sig.level = x, type='two.sample', 
                      alternative='two.sided')$power"</span>, 
                      error <span class="op">=</span> <span class="st">"minimal"</span>, priorH1H0 <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Warning in geom_point(aes(x = res$minimum, y = (costT1T2 * res$minimum + : All aesthetics have length 1, but the data has 9999 rows.</span>
<span class="co">## <span style="color: #00BBBB;">ℹ</span> Please consider using `annotate()` or provide this layer with data containing</span>
<span class="co">##   a single row.</span></code></pre>
<p><img src="compromise_power_files/figure-html/unnamed-chunk-4-1.png" width="576"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res4</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## </span>
<span class="co">## Optimal Alpha</span>
<span class="co">##        Alpha       Beta Weighted.Combined.Error.Rate</span>
<span class="co">## 1 0.07901659 0.03875692                   0.05217681</span>
<span class="co">## </span>
<span class="co">## From power function:</span>
<span class="co">## [1] "power.t.test(delta = .5, sd = 1, n=100, \n                      sig.level = x, type='two.sample', \n                      alternative='two.sided')$power"</span></code></pre>
<p>If you think H1 is four times more likely to be true than H0, you
need to worry less about Type 1 errors, and now the alpha that minimizes
the weighted error rates is 8%. It is always difficult to decide upon
priors (unless you are Omniscient Jones) but even if you ignore them,
you are making the decision that H1 and H0 are equally plausible.</p>
</div>
<div class="section level2">
<h2 id="extending-to-the-analysis-of-variance">Extending to the Analysis of Variance<a class="anchor" aria-label="anchor" href="#extending-to-the-analysis-of-variance"></a>
</h2>
<p>Now that the basics of finding an optimal alpha are out of the way we
can move on to how these methods can be used for an ANOVA, and
<em>F</em>-tests in general.</p>
<p>This is accomplished by the replacing the <code>power.t.test</code>
function with the <code>power.ftest</code> function. As you can see
below it operates very similar to the <code>power.t.test</code>; the
main differences are that <code>power.ftest</code> requires arguments
for the degrees of freedom rather than sample size. Further, rather than
allow for input of the power as an argument, <code>power_ftest</code>
allows the user to input the beta_level.</p>
<pre><code><span class="fu"><a href="../reference/power.ftest.html">power.ftest</a></span><span class="op">(</span>
  num_df <span class="op">=</span> <span class="cn">NULL</span>,
  den_df <span class="op">=</span> <span class="cn">NULL</span>,
  cohen_f <span class="op">=</span> <span class="cn">NULL</span>,
  alpha_level <span class="op">=</span> <span class="fu"><a href="../reference/Superpower_options.html">Superpower_options</a></span><span class="op">(</span><span class="st">"alpha_level"</span><span class="op">)</span>,
  beta_level <span class="op">=</span> <span class="cn">NULL</span>,
  liberal_lambda <span class="op">=</span> <span class="fu"><a href="../reference/Superpower_options.html">Superpower_options</a></span><span class="op">(</span><span class="st">"liberal_lambda"</span><span class="op">)</span>
<span class="op">)</span></code></pre>
<p>The use of the function on its own is simple, but not very intuitive
for power analysis on its own.</p>
<p>For example, let us suppose we have known degrees of freedom of 1 and
128 respectively, and an effect size of interest of
<code>cohen_f = .22</code>. Now we simple want to find what the power
would be given an <code>alpha_level</code> of .07.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/power.ftest.html">power.ftest</a></span><span class="op">(</span>
  num_df <span class="op">=</span> <span class="fl">1</span>,
  den_df <span class="op">=</span> <span class="fl">128</span>,
  cohen_f <span class="op">=</span> <span class="fl">.22</span>,
  alpha_level <span class="op">=</span> <span class="fl">.045</span>,
  beta_level <span class="op">=</span> <span class="cn">NULL</span>,
  liberal_lambda <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
<pre><code><span class="co">## </span>
<span class="co">##      Power Calculation for F-test </span>
<span class="co">## </span>
<span class="co">##          num_df = 1</span>
<span class="co">##          den_df = 128</span>
<span class="co">##         cohen_f = 0.22</span>
<span class="co">##     alpha_level = 0.045</span>
<span class="co">##      beta_level = 0.3210373</span>
<span class="co">##           power = 67.89627</span></code></pre>
<p>The process is simple for using power.ftest; now we can see where it
is actually useful.</p>
<div class="section level3">
<h3 id="an-example-with-anova_exact2">An Example with ANOVA_exact2<a class="anchor" aria-label="anchor" href="#an-example-with-anova_exact2"></a>
</h3>
<p>Let us use an example from another vignette. Imagine you plan to
perform a study in which participants interact with an artificial voice
assistant that sounds either like a human or like a robot, and who
sounds either cheerful or sad. In the example below, we can setup a 2*2
mixed design in <code>ANOVA_design</code> (first factor, voice, is
manipulated between participants, the second factor, emotion, is
manipulated within participants). The sample size is fixed at 40
(meaning the researchers are unable to collect more than this amount) in
each between subject condition (so 80 participants in total), the
assumed population standard deviation is 1.03, the correlation for the
within factors is 0.8, and the means are 1.03, 1.21, 0.98, 1.01. We will
start by using the default <code>alpha_level</code>. The outcome of
interest in this case is the interaction effect; this means we want this
particular ANOVA-level effect to be detected if it were to exist (more
so than other possible outcomes).</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">design_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ANOVA_design.html">ANOVA_design</a></span><span class="op">(</span>design <span class="op">=</span> <span class="st">"2b*2w"</span>,
                   n <span class="op">=</span> <span class="fl">40</span>, 
                   mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.03</span>, <span class="fl">1.41</span>, <span class="fl">0.98</span>, <span class="fl">1.01</span><span class="op">)</span>, 
                   sd <span class="op">=</span> <span class="fl">1.03</span>, 
                   r <span class="op">=</span> <span class="fl">0.8</span>, 
                   labelnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"voice"</span>, <span class="st">"human"</span>, <span class="st">"robot"</span>, 
                                  <span class="st">"emotion"</span>, <span class="st">"cheerful"</span>, <span class="st">"sad"</span><span class="op">)</span>,
                   plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="compromise_power_files/figure-html/unnamed-chunk-6-1.png" width="480"></p>
<p>We can then pass this design onto to the <code>ANOVA_exact2</code>
function to estimate the effect sizes for the this particular
design.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">exact2_res</span> <span class="op">=</span> <span class="fu"><a href="../reference/ANOVA_exact.html">ANOVA_exact2</a></span><span class="op">(</span><span class="va">design_result</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">exact2_res</span><span class="op">$</span><span class="va">main_results</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="20%">
<col width="13%">
<col width="29%">
<col width="14%">
<col width="22%">
</colgroup>
<thead><tr class="header">
<th align="left"></th>
<th align="right">power</th>
<th align="right">partial_eta_squared</th>
<th align="right">cohen_f</th>
<th align="right">non_centrality</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">voice</td>
<td align="right">17.31203</td>
<td align="right">0.0132867</td>
<td align="right">0.1160416</td>
<td align="right">1.050321</td>
</tr>
<tr class="even">
<td align="left">emotion</td>
<td align="right">79.00679</td>
<td align="right">0.0914075</td>
<td align="right">0.3171804</td>
<td align="right">7.847066</td>
</tr>
<tr class="odd">
<td align="left">voice:emotion</td>
<td align="right">65.61040</td>
<td align="right">0.0683053</td>
<td align="right">0.2707638</td>
<td align="right">5.718415</td>
</tr>
</tbody>
</table>
<p>As we can see here we can tell that we are tad under-powered to
detect the effect of interest. Now, let us use <code>power.ftest</code>
to find the alpha that will get us our desired beta (in this case let us
assume .2).</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/power.ftest.html">power.ftest</a></span><span class="op">(</span>num_df <span class="op">=</span> <span class="va">exact2_res</span><span class="op">$</span><span class="va">anova_table</span><span class="op">$</span><span class="va">num_df</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span>,
            den_df <span class="op">=</span> <span class="va">exact2_res</span><span class="op">$</span><span class="va">anova_table</span><span class="op">$</span><span class="va">den_df</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span>,
            cohen_f <span class="op">=</span> <span class="va">exact2_res</span><span class="op">$</span><span class="va">main_results</span><span class="op">$</span><span class="va">cohen_f</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span>,
            alpha_level <span class="op">=</span> <span class="cn">NULL</span>,
            beta_level <span class="op">=</span> <span class="fl">.2</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## </span>
<span class="co">##      Power Calculation for F-test </span>
<span class="co">## </span>
<span class="co">##          num_df = 1</span>
<span class="co">##          den_df = 78</span>
<span class="co">##         cohen_f = 0.2707638</span>
<span class="co">##     alpha_level = 0.125566</span>
<span class="co">##      beta_level = 0.2</span>
<span class="co">##           power = 80</span></code></pre>
<p>So, we can see that the required alpha in this case is approximately
.12. However, what would be the optimal alpha?</p>
<p>Now, let us use this same approach in the <code>optimal_alpha</code>
function.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res5</span> <span class="op">=</span> <span class="fu"><a href="../reference/optimal_alpha.html">optimal_alpha</a></span><span class="op">(</span><span class="st">"power.ftest(num_df = exact2_res$anova_table$num_df[3],
            den_df = exact2_res$anova_table$den_df[3],
            cohen_f = exact2_res$main_results$cohen_f[3],
            alpha_level = x)$power/100"</span>,
            error <span class="op">=</span> <span class="st">"minimal"</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Warning in geom_point(aes(x = res$minimum, y = (costT1T2 * res$minimum + : All aesthetics have length 1, but the data has 9999 rows.</span>
<span class="co">## <span style="color: #00BBBB;">ℹ</span> Please consider using `annotate()` or provide this layer with data containing</span>
<span class="co">##   a single row.</span></code></pre>
<p><img src="compromise_power_files/figure-html/unnamed-chunk-9-1.png" width="576"></p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res5</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## </span>
<span class="co">## Optimal Alpha</span>
<span class="co">##       Alpha      Beta Weighted.Combined.Error.Rate</span>
<span class="co">## 1 0.1417106 0.1826088                    0.1621597</span>
<span class="co">## </span>
<span class="co">## From power function:</span>
<span class="co">## [1] "power.ftest(num_df = exact2_res$anova_table$num_df[3],\n            den_df = exact2_res$anova_table$den_df[3],\n            cohen_f = exact2_res$main_results$cohen_f[3],\n            alpha_level = x)$power/100"</span></code></pre>
<p>Interestingly the values for alpha and beta are fairly close to the
calculations we made with <code>power.ftest</code> alone.</p>
</div>
<div class="section level3">
<h3 id="anova_compromise">ANOVA_compromise<a class="anchor" aria-label="anchor" href="#anova_compromise"></a>
</h3>
<p>Finally, we can extend everything we’ve done to a convenience
function <code>ANOVA_compromise</code>. This way we can simply pass on
the design from <code>ANOVA_design</code> and the optimal alpha can be
determined for <em>every</em> comparison we select in a study.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">comp_res</span> <span class="op">=</span> <span class="fu"><a href="../reference/ANOVA_compromise.html">ANOVA_compromise</a></span><span class="op">(</span><span class="va">design_result</span>,
                            emm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>You’ll notice it takes a lot longer to run
<code>ANOVA_compromise</code> than <code>ANOVA_exact</code> or
<code>ANOVA_exact2</code>, but overall the options (such as
<code>emm = TRUE</code>) are the same. Now, we can go through the
results one-by-one.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#ANOVA results</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">comp_res</span><span class="op">$</span><span class="va">aov_comp</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="20%">
<col width="14%">
<col width="10%">
<col width="10%">
<col width="14%">
<col width="14%">
<col width="14%">
</colgroup>
<thead><tr class="header">
<th align="left">effect</th>
<th align="right">cohen_f</th>
<th align="right">num_df</th>
<th align="right">den_df</th>
<th align="right">alpha</th>
<th align="right">beta</th>
<th align="right">objective</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">voice</td>
<td align="right">0.1160416</td>
<td align="right">1</td>
<td align="right">78</td>
<td align="right">0.2793550</td>
<td align="right">0.5064869</td>
<td align="right">0.3929210</td>
</tr>
<tr class="even">
<td align="left">emotion</td>
<td align="right">0.3171804</td>
<td align="right">1</td>
<td align="right">78</td>
<td align="right">0.1035704</td>
<td align="right">0.1251595</td>
<td align="right">0.1143650</td>
</tr>
<tr class="odd">
<td align="left">voice:emotion</td>
<td align="right">0.2707638</td>
<td align="right">1</td>
<td align="right">78</td>
<td align="right">0.1417106</td>
<td align="right">0.1826088</td>
<td align="right">0.1621597</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#MANOVA results</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">comp_res</span><span class="op">$</span><span class="va">manova_comp</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="20%">
<col width="14%">
<col width="10%">
<col width="10%">
<col width="14%">
<col width="14%">
<col width="14%">
</colgroup>
<thead><tr class="header">
<th align="left">effect</th>
<th align="right">cohen_f</th>
<th align="right">num_df</th>
<th align="right">den_df</th>
<th align="right">alpha</th>
<th align="right">beta</th>
<th align="right">objective</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">1.1423652</td>
<td align="right">1</td>
<td align="right">78</td>
<td align="right">0.0000060</td>
<td align="right">0.0000005</td>
<td align="right">0.0000033</td>
</tr>
<tr class="even">
<td align="left">voice</td>
<td align="right">0.1160416</td>
<td align="right">1</td>
<td align="right">78</td>
<td align="right">0.2793550</td>
<td align="right">0.5064869</td>
<td align="right">0.3929210</td>
</tr>
<tr class="odd">
<td align="left">emotion</td>
<td align="right">0.3171804</td>
<td align="right">1</td>
<td align="right">78</td>
<td align="right">0.1035704</td>
<td align="right">0.1251595</td>
<td align="right">0.1143650</td>
</tr>
<tr class="even">
<td align="left">voice:emotion</td>
<td align="right">0.2707638</td>
<td align="right">1</td>
<td align="right">78</td>
<td align="right">0.1417106</td>
<td align="right">0.1826088</td>
<td align="right">0.1621597</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#emmeans results</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">comp_res</span><span class="op">$</span><span class="va">emmeans_comp</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="52%">
<col width="8%">
<col width="6%">
<col width="6%">
<col width="8%">
<col width="8%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th align="left">effect</th>
<th align="right">cohen_f</th>
<th align="right">num_df</th>
<th align="right">den_df</th>
<th align="right">alpha</th>
<th align="right">beta</th>
<th align="right">objective</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">voice_human emotion_cheerful - voice_robot
emotion_cheerful</td>
<td align="right">0.0244637</td>
<td align="right">1</td>
<td align="right">78</td>
<td align="right">0.3185352</td>
<td align="right">0.6703282</td>
<td align="right">0.4944317</td>
</tr>
<tr class="even">
<td align="left">voice_human emotion_cheerful - voice_human
emotion_sad</td>
<td align="right">0.4157393</td>
<td align="right">1</td>
<td align="right">78</td>
<td align="right">0.0464936</td>
<td align="right">0.0511495</td>
<td align="right">0.0488216</td>
</tr>
<tr class="odd">
<td align="left">voice_human emotion_cheerful - voice_robot
emotion_sad</td>
<td align="right">0.0097855</td>
<td align="right">1</td>
<td align="right">78</td>
<td align="right">0.3201049</td>
<td align="right">0.6781016</td>
<td align="right">0.4991032</td>
</tr>
<tr class="even">
<td align="left">voice_robot emotion_cheerful - voice_human
emotion_sad</td>
<td align="right">0.2103880</td>
<td align="right">1</td>
<td align="right">78</td>
<td align="right">0.1983048</td>
<td align="right">0.2862636</td>
<td align="right">0.2422842</td>
</tr>
<tr class="odd">
<td align="left">voice_robot emotion_cheerful - voice_robot
emotion_sad</td>
<td align="right">0.0328215</td>
<td align="right">1</td>
<td align="right">78</td>
<td align="right">0.3170422</td>
<td align="right">0.6630352</td>
<td align="right">0.4900387</td>
</tr>
<tr class="even">
<td align="left">voice_human emotion_sad - voice_robot emotion_sad</td>
<td align="right">0.1957098</td>
<td align="right">1</td>
<td align="right">78</td>
<td align="right">0.2123057</td>
<td align="right">0.3167599</td>
<td align="right">0.2645328</td>
</tr>
</tbody>
</table>
<p>In addition, we can extract the optimal alpha plots for any of the
comparisons outlined above. These can be found in
<code>aov_plotlist</code>, <code>manova_plotlist</code>, and
<code>emmeans_plotlist</code>.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">comp_res</span><span class="op">$</span><span class="va">aov_plotlist</span></code></pre></div>
<pre><code><span class="co">## $voice</span></code></pre>
<pre><code><span class="co">## Warning in geom_point(aes(x = res$minimum, y = (costT1T2 * res$minimum + : All aesthetics have length 1, but the data has 9999 rows.</span>
<span class="co">## <span style="color: #00BBBB;">ℹ</span> Please consider using `annotate()` or provide this layer with data containing</span>
<span class="co">##   a single row.</span></code></pre>
<p><img src="compromise_power_files/figure-html/comp_plots-1.png" width="576"></p>
<pre><code><span class="co">## </span>
<span class="co">## $emotion</span></code></pre>
<pre><code><span class="co">## Warning in geom_point(aes(x = res$minimum, y = (costT1T2 * res$minimum + : All aesthetics have length 1, but the data has 9999 rows.</span>
<span class="co">## <span style="color: #00BBBB;">ℹ</span> Please consider using `annotate()` or provide this layer with data containing</span>
<span class="co">##   a single row.</span></code></pre>
<p><img src="compromise_power_files/figure-html/comp_plots-2.png" width="576"></p>
<pre><code><span class="co">## </span>
<span class="co">## $`voice:emotion`</span></code></pre>
<pre><code><span class="co">## Warning in geom_point(aes(x = res$minimum, y = (costT1T2 * res$minimum + : All aesthetics have length 1, but the data has 9999 rows.</span>
<span class="co">## <span style="color: #00BBBB;">ℹ</span> Please consider using `annotate()` or provide this layer with data containing</span>
<span class="co">##   a single row.</span></code></pre>
<p><img src="compromise_power_files/figure-html/comp_plots-3.png" width="576"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Aaron Caldwell, Daniel Lakens.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
